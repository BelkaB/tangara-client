//<tangara version="1" encoding="UTF-8">////Clavier
comclave = new CommandesClavier();
comclave.ajouterCommande("droite","suiveur.avancer(10)");
comclave.ajouterCommande("gauche","suiveur.reculer(10)");
comclave.ajouterCommande("bas","suiveur.descendre(10)");
comclave.ajouterCommande("haut","suiveur.monter(10)");
comclave.ajouterCommande("d","suiveur.avancer(10)");
comclave.ajouterCommande("q","suiveur.reculer(10)");
comclave.ajouterCommande("z","suiveur.monter(10)");
comclave.ajouterCommande("s","suiveur.descendre(10)");

//Fond du niveau
image = new Image("niveau10");

//Gameover fond
gameover = new Image("gameover");
gameover.définirTransparence(100);

//Bouton Recommencer
boutonRecommencer = new Bouton();
boutonRecommencer.définirTexte("Recommencer");
boutonRecommencer.cacher();
boutonRecommencer.ajouterCommande("recommencer()");

//Chemin du labyrinthe
unChemin = new Chemin("chemin10");
unChemin.couleurTransparente("blanc");
unChemin.cacher();

//Notre perso
suiveur = new Suiveur("perso");
suiveur.définirChemin(unChemin);
suiveur.définirPosition(28,48);
suiveur.avancer(1);

//Le méchant
suiveur1 = new Suiveur("ennemi");
suiveur1.définirChemin(unChemin);
suiveur1.définirPosition(200,200);
suiveur1.avancer(1);

//Gestion collisions
suiveur.siCollisionAvec(suiveur1, "gameover()");

//Compteur pour avancer
minuteurAvancer = new Minuteur();
minuteurAvancer.définirDélai(2000);
minuteurAvancer.répéter(true);

//Compteur pour reculer
minuteurReculer = new Minuteur();
minuteurReculer.définirDélai(2000);
minuteurReculer.définirPremierDélai(1000);
minuteurReculer.répéter(true);


minuteurReculer.démarrer();
minuteurAvancer.démarrer();
minuteurAvancer.ajouterCommande("avancerTout()");
minuteurReculer.ajouterCommande("reculerTout()");

avancerTout(){
	suiveur1.avancer(20);
}

reculerTout(){
	suiveur1.reculer(20);
}

gameover(){
	comclave.désactiver();
	minuteurAvancer.arrêter();
	minuteurReculer.arrêter();
	suiveur.arrêter();
	suiveur1.cacher();
	suiveur.cacher();
	gameover.définirTransparence(0);	
	boutonRecommencer.montrer();
}

recommencer(){
	suiveur.définirPosition(28,48);
	suiveur.avancer(1);
	suiveur.montrer();
	
    suiveur1.définirPosition(200,200);
    suiveur1.avancer(1);
    suiveur1.montrer();
    
    comclave.activer();
    minuteurAvancer.démarrer();
	minuteurReculer.démarrer();
	boutonRecommencer.cacher();
	gameover.définirTransparence(100);
}