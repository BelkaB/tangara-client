//Clavier
comclave = new CommandesClavier();
comclave.ajouterCommande("droite","suiveur.avancer(10)");
comclave.ajouterCommande("gauche","suiveur.reculer(10)");
comclave.ajouterCommande("bas","suiveur.descendre(10)");
comclave.ajouterCommande("haut","suiveur.monter(10)");
comclave.ajouterCommande("d","suiveur.avancer(10)");
comclave.ajouterCommande("q","suiveur.reculer(10)");
comclave.ajouterCommande("z","suiveur.monter(10)");
comclave.ajouterCommande("s","suiveur.descendre(10)");

image = new Image("../images/niveaux/niveau3.png");

//Gameover fond
gameover = new Image("../images/fonds/gameover.png");
gameover.définirTransparence(100);

unChemin = new Chemin("../images/chemins/chemin3.png");
unChemin.couleurTransparente("noir");

suiveur = new Suiveur("../images/persos/perso.png");
suiveur.définirChemin(unChemin);
suiveur.avancer(1);
unChemin.cacher();

//Bouton Recommencer
boutonRecommencer = new Bouton();
boutonRecommencer.définirTexte("Recommencer");
boutonRecommencer.cacher();
boutonRecommencer.ajouterCommande("recommencer()");

//Le méchant
suiveur1 = new Suiveur("../images/persos/ennemi.png");
suiveur1.définirChemin(unChemin);
suiveur1.définirPosition(268,172);

suiveur1.avancer(1);

suiveur2 = new Suiveur("../images/persos/ennemi2.png");
suiveur2.définirChemin(unChemin);
suiveur2.définirPosition(269,272);

suiveur2.avancer(1);

suiveur3 = new Suiveur("../images/persos/ennemi3.png");
suiveur3.définirChemin(unChemin);
suiveur3.définirPosition(269,387);

suiveur3.avancer(1);

//Point d'arrivée
arrive = new Suiveur("../images/persos/arrivee.png");
arrive.définirChemin(unChemin);
arrive.définirPosition(275,276);
arrive.avancer(1);

//Gestion collisions
suiveur.siCollisionAvec(suiveur1, "gameover()");
suiveur.siCollisionAvec(suiveur2, "gameover()");
suiveur.siCollisionAvec(suiveur3, "gameover()");
suiveur.siCollisionAvec(arrive, "suivant()");

//Compteur pour avancer
minuteurAvancer = new Minuteur();
minuteurAvancer.définirDélai(2000);
minuteurAvancer.répéter(true);

//Compteur pour reculer
minuteurReculer = new Minuteur();
minuteurReculer.définirDélai(2000);
minuteurReculer.définirPremierDélai(1000);
minuteurReculer.répéter(true);


minuteurReculer.démarrer();
minuteurAvancer.démarrer();
minuteurAvancer.ajouterCommande("avancerTout()");
minuteurReculer.ajouterCommande("reculerTout()");

avancerTout(){
	suiveur1.avancer(150);
	suiveur2.reculer(150);
	suiveur3.avancer(150);
}

reculerTout(){
	suiveur1.reculer(150);
	suiveur2.avancer(150);
	suiveur3.reculer(150);
}

gameover(){
	comclave.désactiver();
	minuteurAvancer.arrêter();
	minuteurReculer.arrêter();
	suiveur.arrêter();
	suiveur1.cacher();
	suiveur2.cacher();
	suiveur3.cacher();
	suiveur.cacher();
	arrive.cacher();
	gameover.définirTransparence(0);	
	boutonRecommencer.montrer();
}

recommencer(){
	suiveur.définirPosition(28,48);
	suiveur.avancer(1);
	suiveur.montrer();
	
    suiveur1.définirPosition(268,172);
    suiveur1.avancer(1);
    suiveur1.montrer();
    
    suiveur2.définirPosition(269,272);
    suiveur2.avancer(1);
    suiveur2.montrer();
    
    suiveur3.définirPosition(269,387);
    suiveur3.avancer(1);
    suiveur3.montrer();
    
    arrive.montrer();
    
    comclave.activer();
    minuteurAvancer.démarrer();
	minuteurReculer.démarrer();
	boutonRecommencer.cacher();
	gameover.définirTransparence(100);
}

suivant(){
	tangara.initialiser();
	tangara.chargerProgramme("niveau4.tgr");
}
arrive.définirPosition(265,464);